[tox]
envlist = py38, py39

[testenv:py{38,39}]

setenv =
    # example env variables
    HOME_DIR = {toxinidir}
    REWARD_WINDOW_IN_SECONDS = 7200
    AWS_BATCH_JOB_ARRAY_INDEX = 0
    WORKER_COUNT = 1

    TRAIN_BUCKET = train_bucket_test
    FIREHOSE_BUCKET = firehose_bucket_test

    S3_KEY = temp_s3_key
    AWS_BATCH_JOB_ATTEMPT = 1

    TEST_CASES_DIR = {toxinidir}/test_cases

    TEST_CASE_INGEST_JSON = ingest.json
    TEST_INGEST_EVERY_N_SECONDS = 5

    MERGE_TEST_CASES_RELATIVE_DIR = data/merge
    TEST_MERGE_INITIAL_BATCH_JSON = merge_initial_batch.json
    TEST_MERGE_INITIAL_BATCH_AND_ADDITIONAL_REWARDS_BATCH_JSON = merge_initial_batch_and_additional_rewards_batch.json
    TEST_MERGE_ONLY_ADDITIONAL_REWARDS_BATCH_JSON = merge_only_additional_rewards_batch.json


commands =
           pip3 install --upgrade pip
           pip3 install -r testrequirements.txt
           {envbindir}/pytest -v --capture=tee-sys --ignore=local_test --ignore=tools
